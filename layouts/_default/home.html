{{ define "main" }}
<div class='hx:mx-auto hx:flex hextra-max-page-width'>
  {{ partial "sidebar.html" (dict "context" . "disableSidebar" true "displayPlaceholder" true) }}
  {{ partial "toc.html" . }}
  <article class="hx:w-full hx:break-words hx:flex hx:min-h-[calc(100vh-var(--navbar-height))] hx:min-w-0 hx:justify-center hx:pb-8 hx:pr-[calc(env(safe-area-inset-right)-1.5rem)]">
    <main class="hx:w-full hx:min-w-0 hx:max-w-6xl hx:px-6 hx:pt-4 hx:md:px-12">

      <!-- 
        NUEVA SECCIÓN "HERO"
        Hemos recreado la estética de los shortcodes de Hextra con HTML
        y hemos usado la función i18n, que SÍ funciona aquí.
      -->
      <div class="hextra-hero-container hx:mt-8 hx:mb-16 hx:text-center">
        <h1 class="hextra-hero-headline hx:text-4xl hx:font-bold md:hx:text-5xl">
          {{ i18n "home_headline" }}
        </h1>
        <p class="hextra-hero-subtitle hx:mt-4 hx:text-xl hx:text-gray-600 dark:hx:text-gray-300">
          {{ i18n "home_subtitle" }}
        </p>
        <div class="hextra-hero-button-container hx:mt-8">
          <a class="hx-btn hx-btn-primary" href="/posts">{{ i18n "view_posts" }}</a>
        </div>
      </div>

      <!-- El contenido de _index.md (que ahora está vacío) se renderizaría aquí -->
      <div class="content">{{ .Content }}</div>

      <!-- SECCIÓN DE POSTS RECIENTES (Esta se queda igual) -->
      <section class="hx:mt-12">
        <h2 class="hx:text-2xl hx:font-bold hx:tracking-tight hx:text-slate-900 hx:dark:text-slate-100 hx:mb-6">{{ i18n "recent_posts" }}</h2>
        <div class="hextra-cards hx:mt-4 hx:gap-4 hx:grid not-prose" style="--hextra-cards-grid-cols:3">
          {{ $recentPages := where .Site.RegularPages "Type" "in" (slice "blog" "posts") }}
          {{ range first 6 $recentPages }}
            <a class="hextra-card hx:group hx:flex hx:flex-col hx:justify-start hx:overflow-hidden hx:rounded-lg hx:border hx:border-gray-200 hx:text-current hx:no-underline hx:bg-gray-100 dark:hx:bg-neutral-800 hx-shadow dark:hx-border-neutral-700 hover:hx-shadow-lg dark:hover:hx-border-neutral-500" href="{{ .RelPermalink }}">
              {{ with .Params.featured_image }}
                <img alt="Featured image for {{ $.Title }}" class="hextra-card-image" loading="lazy" decoding="async" src="{{ . | relURL }}">
              {{ end }}
              <div class="hx:p-4">
                <span class="hx:font-semibold hx:text-gray-700 dark:hx-text-neutral-200">{{ .Title }}</span>
                <div class="hx:line-clamp-3 hx:mt-2 hx:text-sm hx:font-normal hx:text-gray-500 dark:hx-text-gray-400">
                  {{ with .Params.description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 150 }}{{ end }}
                </div>
              </div>
            </a>
          {{ end }}
        </div>
      </section>
    </main>
  </article>
</div>
{{ end }}